import {
  require_browser
} from "./chunk-ODQUZQ2K.js";
import {
  __commonJS
} from "./chunk-WXXH56N5.js";

// node_modules/json-stringify-safe/stringify.js
var require_stringify = __commonJS({
  "node_modules/json-stringify-safe/stringify.js"(exports, module) {
    exports = module.exports = stringify;
    exports.getSerialize = serializer;
    function stringify(obj, replacer, spaces, cycleReplacer) {
      return JSON.stringify(obj, serializer(replacer, cycleReplacer), spaces);
    }
    function serializer(replacer, cycleReplacer) {
      var stack = [], keys = [];
      if (cycleReplacer == null)
        cycleReplacer = function(key, value) {
          if (stack[0] === value)
            return "[Circular ~]";
          return "[Circular ~." + keys.slice(0, stack.indexOf(value)).join(".") + "]";
        };
      return function(key, value) {
        if (stack.length > 0) {
          var thisPos = stack.indexOf(this);
          ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);
          ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);
          if (~stack.indexOf(value))
            value = cycleReplacer.call(this, key, value);
        } else
          stack.push(value);
        return replacer == null ? value : replacer.call(this, key, value);
      };
    }
  }
});

// node_modules/redux-immutable-state-invariant/dist/isImmutable.js
var require_isImmutable = __commonJS({
  "node_modules/redux-immutable-state-invariant/dist/isImmutable.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function(obj) {
      return typeof obj;
    } : function(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
    exports.default = isImmutableDefault;
    function isImmutableDefault(value) {
      return (typeof value === "undefined" ? "undefined" : _typeof(value)) !== "object" || value === null || typeof value === "undefined";
    }
  }
});

// node_modules/redux-immutable-state-invariant/dist/trackForMutations.js
var require_trackForMutations = __commonJS({
  "node_modules/redux-immutable-state-invariant/dist/trackForMutations.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.default = trackForMutations;
    function trackForMutations(isImmutable, ignore, obj) {
      var trackedProperties = trackProperties(isImmutable, ignore, obj);
      return {
        detectMutations: function detectMutations() {
          return _detectMutations(isImmutable, ignore, trackedProperties, obj);
        }
      };
    }
    function trackProperties(isImmutable) {
      var ignore = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [];
      var obj = arguments[2];
      var path = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : [];
      var tracked = { value: obj };
      if (!isImmutable(obj)) {
        tracked.children = {};
        for (var key in obj) {
          var childPath = path.concat(key);
          if (ignore.length && ignore.indexOf(childPath.join(".")) !== -1) {
            continue;
          }
          tracked.children[key] = trackProperties(isImmutable, ignore, obj[key], childPath);
        }
      }
      return tracked;
    }
    function _detectMutations(isImmutable) {
      var ignore = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [];
      var trackedProperty = arguments[2];
      var obj = arguments[3];
      var sameParentRef = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : false;
      var path = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : [];
      var prevObj = trackedProperty ? trackedProperty.value : void 0;
      var sameRef = prevObj === obj;
      if (sameParentRef && !sameRef && !Number.isNaN(obj)) {
        return { wasMutated: true, path };
      }
      if (isImmutable(prevObj) || isImmutable(obj)) {
        return { wasMutated: false };
      }
      var keysToDetect = {};
      Object.keys(trackedProperty.children).forEach(function(key2) {
        keysToDetect[key2] = true;
      });
      Object.keys(obj).forEach(function(key2) {
        keysToDetect[key2] = true;
      });
      var keys = Object.keys(keysToDetect);
      for (var i = 0; i < keys.length; i++) {
        var key = keys[i];
        var childPath = path.concat(key);
        if (ignore.length && ignore.indexOf(childPath.join(".")) !== -1) {
          continue;
        }
        var result = _detectMutations(isImmutable, ignore, trackedProperty.children[key], obj[key], sameRef, childPath);
        if (result.wasMutated) {
          return result;
        }
      }
      return { wasMutated: false };
    }
  }
});

// node_modules/redux-immutable-state-invariant/dist/index.js
var require_dist = __commonJS({
  "node_modules/redux-immutable-state-invariant/dist/index.js"(exports) {
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports.default = immutableStateInvariantMiddleware;
    var _invariant = require_browser();
    var _invariant2 = _interopRequireDefault(_invariant);
    var _jsonStringifySafe = require_stringify();
    var _jsonStringifySafe2 = _interopRequireDefault(_jsonStringifySafe);
    var _isImmutable = require_isImmutable();
    var _isImmutable2 = _interopRequireDefault(_isImmutable);
    var _trackForMutations = require_trackForMutations();
    var _trackForMutations2 = _interopRequireDefault(_trackForMutations);
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { default: obj };
    }
    var BETWEEN_DISPATCHES_MESSAGE = ["A state mutation was detected between dispatches, in the path `%s`.", "This may cause incorrect behavior.", "(http://redux.js.org/docs/Troubleshooting.html#never-mutate-reducer-arguments)"].join(" ");
    var INSIDE_DISPATCH_MESSAGE = ["A state mutation was detected inside a dispatch, in the path: `%s`.", "Take a look at the reducer(s) handling the action %s.", "(http://redux.js.org/docs/Troubleshooting.html#never-mutate-reducer-arguments)"].join(" ");
    function immutableStateInvariantMiddleware() {
      var options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
      var _options$isImmutable = options.isImmutable, isImmutable = _options$isImmutable === void 0 ? _isImmutable2.default : _options$isImmutable, ignore = options.ignore;
      var track = _trackForMutations2.default.bind(null, isImmutable, ignore);
      return function(_ref) {
        var getState = _ref.getState;
        var state = getState();
        var tracker = track(state);
        var result = void 0;
        return function(next) {
          return function(action) {
            state = getState();
            result = tracker.detectMutations();
            tracker = track(state);
            (0, _invariant2.default)(!result.wasMutated, BETWEEN_DISPATCHES_MESSAGE, (result.path || []).join("."));
            var dispatchedAction = next(action);
            state = getState();
            result = tracker.detectMutations();
            tracker = track(state);
            result.wasMutated && (0, _invariant2.default)(!result.wasMutated, INSIDE_DISPATCH_MESSAGE, (result.path || []).join("."), (0, _jsonStringifySafe2.default)(action));
            return dispatchedAction;
          };
        };
      };
    }
  }
});
export default require_dist();
//# sourceMappingURL=redux-immutable-state-invariant.js.map
